<div class="content-block dx-card responsive-paddings">
  <div>
    <h2>Listagem de Produtos</h2>
  </div>

  <dx-data-grid
    id="gridContainer"
    [dataSource]="dataSource"
    keyExpr="id"
    [columnAutoWidth]="true"
    [remoteOperations]="false"
    [allowColumnReordering]="true"
    [rowAlternationEnabled]="true"
    [showBorders]="true"
    (onRowClick)="onRowClick($event)"
    (onRowRemoving)="validateRemove($event)">

    <dxo-selection mode="single"></dxo-selection>

    <dxo-paging [pageSize]="10"></dxo-paging>

    <dxo-pager
      [showPageSizeSelector]="true"
      [allowedPageSizes]="[10, 25, 50, 100]">
    </dxo-pager>

    <dxo-search-panel
      [visible]="true"
      [highlightCaseSensitive]="true">
    </dxo-search-panel>

    <dxo-group-panel [visible]="true"></dxo-group-panel>
    <dxo-grouping [autoExpandAll]="false"></dxo-grouping>

    <dxo-toolbar>
      <dxi-item class="search" name="searchPanel"></dxi-item>

      <dxi-item >
        <dx-button
          icon="add"
          type="success"
          text="Novo"
          [width]="136"
          [height]="50"
          (onClick)="novoProduto()">
        </dx-button>
      </dxi-item>
    </dxo-toolbar>

    <dxi-column
      dataField="codigo"
      caption="Código"
      dataType="number"
      alignment="left"
      [allowEditing]="false">
    </dxi-column>

    <dxi-column
      caption="Descrição"
      dataField="descricao"
      dataType="string"
      alignment="left"
      [allowGrouping]="false"
      cssClass="bullet">
    </dxi-column>

    <dxi-column
      caption="Valor Unitário"
      dataField="valor_unitario"
      dataType="number"
      format="$ #.##0,#"
      alignment="left"
      [allowGrouping]="false"
      cssClass="bullet">
    </dxi-column>

    <dxo-editing
      mode="popup"
      [allowDeleting]="true">
    </dxo-editing>

    <div *dxTemplate="let d of 'discountCellTemplate'">
      <div class="chart-cell">
        <dx-bullet
          [showTarget]="false"
          [showZeroLevel]="true"
          [startScaleValue]="0"
          [endScaleValue]="100"
          [value]="d.value * 100"
        >
          <dxo-size [width]="150" [height]="35"></dxo-size>
          <dxo-tooltip
            [enabled]="true"
            [paddingTopBottom]="2">
            <dxo-font [size]="18"></dxo-font>
          </dxo-tooltip>
          <dxo-margin [top]="5" [bottom]="0" [left]="5"></dxo-margin>
        </dx-bullet>
      </div>
    </div>
  </dx-data-grid>

</div>
